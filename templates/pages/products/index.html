{% extends 'layouts/index.html' %}

{% block breadcrumb %}
    <span>product lists</span>
{% endblock %}

{% block content %}
    <a href="{{ url_for('products.create') }}" class="btn__add-product">
        <button class="btn btn__secondary">add product</button>
    </a>
    <div class="products__cards">
        {% for product in products %}
            <div class="product__card">
                <div class="image__card">
                    <img 
                        src="{{ url_for('static', filename='images/' ~ product[3]) }}" 
                        alt="{{ product[1] }}"
                    >
                </div>
                <div class="desc__card">
                    <h3>{{ product[1] }}</h3>
                    <p class="price" data-price="{{ product[2] }}"></p>
                    <div class="btn__group">
                        <button class="btn btn__primary">add to cart</button>
                        <a href="{{ url_for('products.update', id=product[0]) }}">
                            <button class="btn btn__secondary">edit</button>
                        </a>
                        <button class="btn btn__danger">delete</button>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.querySelectorAll('.price').forEach(function(el) {
            const price = parseFloat(el.getAttribute('data-price'));
            el.textContent = new Intl.NumberFormat('id-ID', { 
                style: 'currency', 
                currency: 'IDR',
                maximumFractionDigits: 0
            }).format(price);
        });
    </script>
{% endblock %}